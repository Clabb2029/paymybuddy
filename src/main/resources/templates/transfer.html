<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head.html"></head>
<body>
    <header th:replace="fragments/header.html"></header>
    <nav th:replace="fragments/breadcrumbs.html"></nav>
    <ul class="nav nav-tabs ps-4">
        <li class="nav-item">
            <a class="nav-link" th:classappend="${selectedTab == 'transfer' ? 'active' : ''}" th:href="@{/transfer}">Transfer between Buddies</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" th:classappend="${selectedTab == 'banktransfer' ? 'active' : ''}" th:href="@{/bank-transfer}">Bank Transfer</a>
        </li>
    </ul>
    <div class="container py-4 px-5" th:if="${selectedTab == 'transfer'}">
        <div class="d-flex justify-content-between">
            <h4>Send Money</h4>
            <a href="/home"><button class="btn btn-primary nowrap">Add Connection</button></a>
        </div>
        <div class="d-flex justify-content-evenly p-5 grey-bg">
            <select name="">
                <option value="">Select A Connection</option>
            </select>
            <input type="number" placeholder="0">
            <button type="button" class="btn btn-success green-bg px-5">Pay</button>
        </div>
        <h4 class="mt-4">My Transactions</h4>
        <table class="table table-striped table-borderless transfer-table">
            <thead>
            <tr class="transfer-row">
                <th scope="col">Connection</th>
                <th scope="col">Description</th>
                <th scope="col">Amount</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="transfer : ${transfers}" class="transfer-row">
                <td th:text="${currentUserFullname == transfer.getBeneficiaryFullname()} ? ${transfer.getSenderFullname()} : ${transfer.getSenderFullname()}"></td>
                <td class="description"><div th:text="${transfer.description}"></div></td>
                <td th:text="${transfer.amount}"></td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="container py-4 px-5" th:if="${selectedTab == 'banktransfer'}">
        <div class="d-flex justify-content-start">
            <h4 class="mt-4">Add Money</h4>
        </div>
        <form th:action="@{/transfer/add-money}" th:object="${bankTransfer}" action="#" method="post" class="p-5 grey-bg">
            <div class="d-flex justify-content-between mb-3">
                <div class="col-4">
                    <label for="amount" class="form-label">Amount</label>
                    <input th:field="*{amount}" type="number" class="form-control" id="amount" placeholder="0">
                </div>
                <div class="col-6">
                    <label for="bankAccountNumber" class="form-label">Bank account number</label>
                    <input th:field="*{bankAccountNumber}" type="text" class="form-control" id="bankAccountNumber" placeholder="FR76...">
                </div>
            </div>
            <div class="d-flex justify-content-between">
                <div class="col-4">
                    <label for="description" class="form-label">Description</label>
                    <input th:field="*{description}" type="text" class="form-control" id="description" placeholder="Cinema">
                </div>
                <button type="submit" class="btn btn-success green-bg px-5 mt-auto">Add Money</button>
            </div>
        </form>
        <h4>My Transfers</h4>
        <table class="table table-striped table-borderless transfer-table">
            <thead>
            <tr class="transfer-row">
                <th scope="col">Date</th>
                <th scope="col">Description</th>
                <th scope="col">Amount</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="transfer : ${bankTransfers}" class="transfer-row">
                <td th:text="${#dates.format(transfer.getDate(), 'dd/MM/yyyy')}"></td>
                <td class="description"><div th:text="${transfer.description}"></div></td>
                <td th:text="${transfer.amount}"></td>
            </tr>
            </tbody>
        </table>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>